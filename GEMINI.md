# GEMINI Project Analysis: Antelope Resource Provider

## Project Overview

This project is a TypeScript-based application called "Antelope Resource Provider". It serves two primary functions:

1.  **A command-line interface (CLI) tool (`rpcli`)** for managing Antelope blockchain resources.
2.  **An HTTP API server** to programmatically request resource coverage and powerups.

The application is designed to interact with Antelope blockchains to manage account resources (CPU and NET), provide powerups, and cosign transactions.

**Key Technologies:**

*   **Language:** TypeScript
*   **Runtime:** Bun
*   **API Framework:** ElysiaJS
*   **CLI Framework:** Commander.js
*   **Database ORM:** Drizzle ORM (with SQLite as the default adapter)
*   **Blockchain Interaction:** `@wharfkit/session` and related libraries

**Architecture:**

*   **`src/`**: Contains the main source code.
    *   **`api/`**: Defines the HTTP API endpoints.
    *   **`cli/`**: Contains the logic for the command-line interface.
    *   **`lib/`**: Holds shared libraries for database access, blockchain interaction, and other utilities.
    *   **`manager/`**: Implements the resource management logic.
    *   **`provider/`**: Contains the resource provider service.
*   **`drizzle/`**: Stores database migration files generated by Drizzle Kit.
*   **`scripts/`**: Includes utility scripts, such as for generating migrations.
*   **`test/`**: Contains test files.

## Building and Running

### Installation

To install the project dependencies, run:

```bash
bun install
```

### Development

To run the application in development mode with file watching, use:

```bash
bun run dev
```

You can also run specific services:

```bash
bun run dev/manager
bun run dev/api
```

### Building

To build a compiled, executable binary, run:

```bash
make build
```

The output binary will be located in the `dist/` directory.

### Testing

To run the test suite, use:

```bash
bun test
```

or

```bash
make test
```

## Development Conventions

### Configuration

*   The application is configured via a `.env` file in the project root.
*   A sample configuration file is provided as `.env.example`.
*   The `rpcli config` command can be used to generate a new `.env` file.
*   Configuration values are loaded and parsed in `src/config.ts`.

### Linting and Formatting

*   The project uses **ESLint** for linting and **Prettier** for code formatting.
*   To check for linting and formatting errors, run:
    ```bash
    bun run lint
    ```
*   To automatically fix formatting issues, run:
    ```bash
    bun run format
    ```

### Database Migrations

*   Database schema is defined in `src/lib/db/schema.ts`.
*   Migrations are managed using **Drizzle Kit**.
*   To generate a new migration, use the script:
    ```bash
    bun run scripts/generate-migration.ts
    ```
*   Migrations are applied automatically when the application starts by the `runMigrations` function in `src/index.ts`.
